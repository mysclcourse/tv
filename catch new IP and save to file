import requests
from bs4 import BeautifulSoup

def find_class_info(url, class_name):
    try:
        response = requests.get(url)
        response.raise_for_status()  # Check for any errors in the HTTP response
        soup = BeautifulSoup(response.content, 'html.parser')
        class_elements = soup.find_all(class_=class_name)
        if len(class_elements) >= 2:
            second_class_info = class_elements[1].text.strip()  # Remove leading and trailing spaces or newlines
            third_class_info = class_elements[2].text.strip()  # Remove leading and trailing spaces or newlines
            return second_class_info, third_class_info
        else:
            return f"Less than two elements with class name '{class_name}' found"
    except requests.RequestException as e:
        return f"An error occurred: {e}"

def write_to_file(filename, data):
    try:
        with open(filename, 'w') as file:
            file.write(data)
        return f"Data has been successfully written to {filename}"
    except IOError as e:
        return f"An error occurred while writing to the file: {e}"

url = "https://fofa.info/result?qbase64=cmVnaW9uPSJHdWFuZ2RvbmciICYmIGNpdHk9Ikd1YW5nemhvdSIgJiYgc2VydmVyPSJ1ZHB4eSIg"
class_name = "hsxa-host"
filename = r"C:\Users\name\Desktop\temp.txt"

result = find_class_info(url, class_name)

if isinstance(result, tuple):
    second_class_info, third_class_info = result
    #second_class_info = second_class_info.replace(" ", "").replace("\n", "")  # Remove all spaces and newlines
    #third_class_info = third_class_info.replace(" ", "").replace("\n", "")  # Remove all spaces and newlines
    write_result = write_to_file(filename, f"{second_class_info}"+"\n" +f"{third_class_info}")
    print(write_result)
else:
    print(result)
